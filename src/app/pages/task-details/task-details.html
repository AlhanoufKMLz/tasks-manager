<div class="task-details-container">
    @if (task(); as currentTask){
        <div>
            <div class="header">
                <h1>{{ currentTask.title }} <span>{{ taskService.getDaysRemaining(currentTask.dueDate) }}</span></h1>
                
                <form [formGroup]="statusForm">
                    <div class="onoffswitch">
                        <input type="checkbox" formControlName="completed" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch" tabindex="0">
                        <label class="onoffswitch-label" for="myonoffswitch">
                            <span class="onoffswitch-inner"></span>
                            <span class="onoffswitch-switch"></span>
                        </label>
                    </div>
                </form>
            </div>

            <div class="task-details">
                <div class="detail-row">
                    <strong>Description:</strong>
                    <p>{{ currentTask.description }}</p>
                </div>

                <div class="detail-row">
                    <strong>Created:</strong>
                    <p>{{ currentTask.createdAt.toLocaleDateString() }}</p>
                </div>

                <div class="detail-row">
                    <strong>Due Date:</strong>
                    <p>{{ currentTask.dueDate.toLocaleDateString() }}</p>
                </div>

                <div class="detail-row">
                    <strong>Status:</strong>
                    <p>{{ currentTask.completed ? 'Completed' : 'In Progress' }}</p>
                </div>
            </div>

            <div class="actions">
                <button routerLink="/" class="back-btn">Back to list</button>
                <button class="delete-btn" (click)="deleteTask()">Delete</button>
            </div>
        </div>
    } @else {
        <div class="not-found">
            <h2>Task Not Found</h2>
            <p>The task you're looking for doesn't exist.</p>
            <button routerLink="/">Go Back</button>
        </div>
    }
</div>
